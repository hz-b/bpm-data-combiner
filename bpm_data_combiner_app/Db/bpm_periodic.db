
# this record is now here to simulate the trigger
# there should be a dedicated input trigger
# that listens to the trigger common to all others
record(calc, "$(PREFIX):inp:periodic:cnt")
{
      field(DESC, "trigger periodic update")
      field(VAL, 0)
      field(PINI, 1)
      field(CALC, "VAL + 1")
      field(SCAN, "2 second")
      field(FLNK, "$(PREFIX):im:periodic:psh")

}

# record(waveform, "$(PREFIX):inp:periodic:psh")
# {
#       field(DESC, "Listen to neighbour")
#       field(INP,  "MDIZ1T7G:bdata CPP")
#       field(FLNK, "$(PREFIX):im:periodic:psh")
# }

record(longout, "$(PREFIX):im:periodic:psh")
{
     field(DESC, "trigger periodic update to python")
     field(DTYP, "pydev")
     field(OUT, "@update(dev_name=None, periodic=%VAL%, tpro=%TPRO%)")
     field(DOL, "$(PREFIX):inp:periodic:psh")
     field(OMSL, "closed_loop")
     field(TPRO, 0)
     field(FLNK, "$(PREFIX):mon:periodic:cnt")
}

record(calc, "$(PREFIX):mon:periodic:cnt")
{
      field(DESC, "how many periodic triggers received?")
      field(VAL, 0)
      field(PINI, 1)
      field(CALC, "VAL + 1")
}
